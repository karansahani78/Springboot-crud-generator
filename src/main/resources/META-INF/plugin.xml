<idea-plugin>

    <id>com.karan.springbootcrud</id>

    <name>Spring Boot CRUD Generator</name>

    <version>1.0.6</version>

    <!-- Compatible with IntelliJ IDEA 2023.3 through 2025.3 -->
    <idea-version since-build="233" until-build="253.*"/>

    <vendor
            name="Karan Sahani"
            email="karansahani723@gmail.com"
            url="https://github.com/karansahani78">
        Karan Sahani
    </vendor>

    <description><![CDATA[
        <p>
            <b>Spring Boot CRUD Generator</b> generates
            <b>production-ready CRUD layers</b> for Spring Boot applications
            directly from JPA entities with advanced features and multi-entity support.
        </p>

        <h3>Core Features</h3>
        <ul>
            <li><b>Multi-Entity Support</b> - Generate CRUD for multiple entities seamlessly</li>
            <li><b>REST Controller</b> - Complete CRUD endpoints with OpenAPI documentation</li>
            <li><b>Service Layer</b> - Transaction management with pagination support</li>
            <li><b>Repository</b> - Spring Data JPA repository interface</li>
            <li><b>DTO</b> - Data Transfer Objects with validation annotations</li>
            <li><b>Mapper</b> - Entity-DTO conversion utilities using BeanUtils</li>
            <li><b>Exception Handling</b> - Custom exceptions with global handler</li>
            <li><b>Swagger/OpenAPI</b> - Complete API documentation with Springdoc</li>
            <li><b>Pagination</b> - Page-based results with sorting support</li>
            <li><b>JPA Auditing</b> - Automatic tracking of created/modified timestamps and users</li>
            <li><b>JWT Security (Optional)</b> - Role-based authentication & authorization using Spring Security</li>
        </ul>

        <h3>Generated Components</h3>
        <ul>
            <li>âœ“ OpenAPI Configuration (Swagger UI ready)</li>
            <li>âœ“ BaseAuditEntity (CreatedAt, UpdatedAt, CreatedBy, UpdatedBy)</li>
            <li>âœ“ JpaAuditingConfig (with Spring Security integration)</li>
            <li>âœ“ PageResponse wrapper for paginated results</li>
            <li>âœ“ Custom exceptions (ResourceNotFoundException, BadRequestException, etc.)</li>
            <li>âœ“ ErrorResponse DTO with standardized error structure</li>
            <li>âœ“ GlobalExceptionHandler (@ControllerAdvice)</li>
            <li>âœ“ Entity DTOs with @Schema annotations</li>
            <li>âœ“ Service methods with pagination</li>
            <li>âœ“ Controller endpoints with full Swagger docs</li>
            <li>âœ“ Optional JWT authentication module with role-based access (USER, ADMIN, MODERATOR)</li>
            <li>âœ“ Complete API documentation markdown files</li>
            <li>âœ“ Smart file detection - avoids duplicate configuration files</li>
        </ul>

        <h3>REST Endpoints Generated (Per Entity)</h3>
        <ul>
            <li>GET /api/{entity} - Get all entities (unpaginated)</li>
            <li>GET /api/{entity}/paginated - Get paginated & sorted results</li>
            <li>GET /api/{entity}/{id} - Get entity by ID</li>
            <li>POST /api/{entity} - Create new entity</li>
            <li>PUT /api/{entity}/{id} - Update entity</li>
            <li>DELETE /api/{entity}/{id} - Delete entity</li>
            <li>HEAD /api/{entity}/{id} - Check if entity exists</li>
            <li>GET /api/{entity}/count - Count all entities</li>
        </ul>

        <h3>Authentication Endpoints (If JWT Enabled)</h3>
        <ul>
            <li>POST /api/auth/register - Register new user</li>
            <li>POST /api/auth/login - Authenticate user</li>
        </ul>

        <h3>Usage</h3>
        <ol>
            <li>Right-click on any JPA entity class in the editor</li>
            <li>Select <b>"Generate Spring Boot CRUD"</b></li>
            <li>Choose whether to include JWT Security (optional)</li>
            <li>All layers will be generated automatically in appropriate packages</li>
            <li>Repeat for multiple entities - shared config files won't be duplicated</li>
            <li>Access Swagger UI at http://localhost:8080/swagger-ui.html</li>
        </ol>

        <h3>Multi-Entity Workflow</h3>
        <pre>
        1. Generate CRUD for User entity â†’ Full setup created
        2. Generate CRUD for Post entity â†’ Only Post-specific files added
        3. Generate CRUD for Comment entity â†’ Only Comment-specific files added

        âœ“ Configuration files (OpenAPI, Auditing, Security) are shared
        âœ“ Entity-specific files (DTO, Service, Controller) are unique
        âœ“ No duplicate file errors!
        </pre>

        <h3>Generated Project Structure</h3>
        <pre>
        com.example.yourapp
        â”œâ”€â”€ config (Shared Configuration - Generated Once)
        â”‚   â”œâ”€â”€ OpenApiConfig.java
        â”‚   â”œâ”€â”€ JpaAuditingConfig.java
        â”‚   â””â”€â”€ SecurityConfig.java (optional)
        â”œâ”€â”€ entity
        â”‚   â”œâ”€â”€ BaseAuditEntity.java (shared)
        â”‚   â”œâ”€â”€ AppUser.java (if JWT enabled)
        â”‚   â”œâ”€â”€ Role.java (if JWT enabled)
        â”‚   â”œâ”€â”€ User.java (your entity)
        â”‚   â”œâ”€â”€ Post.java (your entity)
        â”‚   â””â”€â”€ Comment.java (your entity)
        â”œâ”€â”€ dto (Shared + Entity-specific)
        â”‚   â”œâ”€â”€ PageResponse.java (shared)
        â”‚   â”œâ”€â”€ ErrorResponse.java (shared)
        â”‚   â”œâ”€â”€ UserDto.java (entity-specific)
        â”‚   â”œâ”€â”€ PostDto.java (entity-specific)
        â”‚   â””â”€â”€ CommentDto.java (entity-specific)
        â”œâ”€â”€ mapper (Entity-specific)
        â”‚   â”œâ”€â”€ UserMapper.java
        â”‚   â”œâ”€â”€ PostMapper.java
        â”‚   â””â”€â”€ CommentMapper.java
        â”œâ”€â”€ repository (Entity-specific)
        â”‚   â”œâ”€â”€ UserRepository.java
        â”‚   â”œâ”€â”€ PostRepository.java
        â”‚   â””â”€â”€ CommentRepository.java
        â”œâ”€â”€ service (Entity-specific)
        â”‚   â”œâ”€â”€ UserService.java
        â”‚   â”œâ”€â”€ PostService.java
        â”‚   â””â”€â”€ CommentService.java
        â”œâ”€â”€ controller (Entity-specific)
        â”‚   â”œâ”€â”€ UserController.java
        â”‚   â”œâ”€â”€ PostController.java
        â”‚   â”œâ”€â”€ CommentController.java
        â”‚   â””â”€â”€ AuthenticationController.java (if JWT)
        â”œâ”€â”€ security (JWT - Generated Once if enabled)
        â”‚   â”œâ”€â”€ JwtService.java
        â”‚   â”œâ”€â”€ JwtAuthenticationFilter.java
        â”‚   â””â”€â”€ UserDetailsServiceImpl.java
        â””â”€â”€ exception (Shared - Generated Once)
            â”œâ”€â”€ ResourceNotFoundException.java
            â”œâ”€â”€ BadRequestException.java
            â”œâ”€â”€ DuplicateResourceException.java
            â””â”€â”€ GlobalExceptionHandler.java
        </pre>

        <h3>Requirements</h3>
        <ul>
            <li>Spring Boot 3.2.0+ (or 2.7+ with adjustments)</li>
            <li>Java 17+</li>
            <li>Spring Data JPA</li>
            <li>Spring Web</li>
            <li>Spring Security (only if JWT is enabled)</li>
            <li>Bean Validation</li>
            <li>Springdoc OpenAPI (for Swagger documentation)</li>
        </ul>

        <h3>Compatibility</h3>
        <ul>
            <li>Supports both Jakarta and Javax persistence annotations</li>
            <li>Works with any JPA entity</li>
            <li>JWT security is fully optional and non-intrusive</li>
            <li>Generate CRUD for unlimited entities in the same project</li>
            <li>Compatible with PostgreSQL, MySQL, H2, and other databases</li>
            <li>IntelliJ IDEA 2023.3 through 2025.3</li>
        </ul>

        <h3>What's New in 1.0.6</h3>
        <ul>
            <li>ðŸ”§ <b>Bug Fix:</b> Multi-entity support - No more duplicate file errors</li>
            <li>ðŸ”§ <b>Bug Fix:</b> Smart file existence detection for all generators</li>
            <li>ðŸ”§ <b>Bug Fix:</b> Configuration files are now properly shared across entities</li>
            <li>âœ¨ <b>Enhancement:</b> Generate CRUD for multiple entities seamlessly</li>
            <li>âœ¨ <b>Enhancement:</b> Improved file management system</li>
            <li>âœ¨ <b>Enhancement:</b> Better error messages and console logging</li>
        </ul>
    ]]></description>

    <change-notes><![CDATA[
        <h3>Version 1.0.6</h3>
        <ul>
            <li><b>ðŸ”§ CRITICAL BUG FIX:</b> Multi-entity support now working correctly</li>
            <li><b>Fixed:</b> "File already exists" error when generating CRUD for multiple entities</li>
            <li><b>Fixed:</b> Configuration files (OpenApiConfig, JpaAuditingConfig, etc.) are now shared</li>
            <li><b>Fixed:</b> Security files are generated once and reused across all entities</li>
            <li><b>Fixed:</b> Exception classes are shared across entities</li>
            <li><b>Fixed:</b> Pagination components (PageResponse, SortDirection) are shared</li>
            <li><b>Improved:</b> Smart file existence detection using FileExistsUtil</li>
            <li><b>Improved:</b> Console logging for skipped files</li>
            <li><b>Improved:</b> Error handling and validation</li>
            <li><b>Enhanced:</b> Better multi-entity workflow documentation</li>
        </ul>

        <h3>Version 1.0.5</h3>
        <ul>
            <li><b>NEW:</b> Optional JWT-based security support</li>
            <li>Role-based authorization (USER, ADMIN, MODERATOR)</li>
            <li>Authentication & registration endpoints</li>
            <li>JWT integration designed to be optional and customizable</li>
            <li>Spring Security integration with JPA Auditing</li>
        </ul>

        <h3>Version 1.0.4</h3>
        <ul>
            <li><b>NEW:</b> JPA Auditing support with BaseAuditEntity</li>
            <li>Automatic tracking of createdAt, updatedAt, createdBy, updatedBy</li>
            <li><b>NEW:</b> Pagination and sorting support</li>
            <li>PageResponse wrapper with metadata</li>
            <li><b>NEW:</b> Swagger/OpenAPI 3.0 integration</li>
            <li>Complete API documentation with @Operation and @Schema</li>
        </ul>

        <h3>Version 1.0.3</h3>
        <ul>
            <li>Fixed OpenAPI configuration compatibility</li>
            <li>Updated to work with Spring Boot 3.2.0</li>
        </ul>

        <h3>Version 1.0.2</h3>
        <ul>
            <li>Fixed DTO toString() generation</li>
            <li>Enhanced field mapping</li>
        </ul>

        <h3>Version 1.0.1</h3>
        <ul>
            <li>Initial release</li>
            <li>Basic CRUD generation from JPA entities</li>
            <li>Support for custom ID types</li>
        </ul>
    ]]></change-notes>

    <depends>com.intellij.modules.java</depends>
    <depends>com.intellij.modules.platform</depends>

    <actions>
        <action
                id="GenerateSpringCrud"
                class="com.karan.intellijplatformplugin.action.GenerateCrudAction"
                text="Generate Spring Boot CRUD"
                description="Generate complete CRUD layer with multi-entity support, Swagger, Pagination, Auditing, Exception Handling, and optional JWT Security"
                icon="AllIcons.Actions.Lightning">
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="first"/>
            <add-to-group group-id="GenerateGroup" anchor="first"/>
        </action>
    </actions>

</idea-plugin>